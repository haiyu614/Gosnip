# Gosnip - 基于Go的简易短视频后端项目

Gosnip 是一个使用 Go 语言开发的后端系统，实现了短视频分享平台的核心功能。

## 项目概述

这是一个现代化、高性能的微服务架构项目，旨在提供类似于抖音的短视频分享平台功能。该项目基于 Go 语言开发，采用了多种现代技术栈以确保高并发性能和可扩展性。

## 技术架构

### 核心技术栈
- **编程语言**: Go
- **Web框架**: Gin
- **RPC框架**: gRPC
- **缓存**: Redis
- **消息队列**: RabbitMQ
- **服务发现**: Consul
- **监控追踪**: OpenTelemetry, Prometheus
- **推荐系统**: Gorse

### 微服务架构

项目采用微服务架构，主要包含以下服务：

| 服务名称 | 端口 | 功能 |
|---------|------|------|
| GateWay | 37000 | API网关 |
| AuthService | 37001 | 用户认证服务 |
| UserService | 37002 | 用户信息服务 |
| CommentService | 37003 | 评论服务 |
| FeedService | 37004 | 视频流服务 |
| PublisherService | 37005 | 视频发布服务 |
| FavoriteService | 37006 | 点赞服务 |
| MessageService | 37007 | 消息服务 |
| RelationService | 37008 | 用户关系服务 |
| RecommendService | 37009 | 推荐服务 |

### 主要功能模块

1. **用户系统**
   - 用户注册与登录
   - 用户信息管理
   - 用户角色权限控制

2. **视频系统**
   - 视频上传与处理
   - 视频流推送
   - 视频封面生成
   - 视频摘要与关键词提取

3. **社交系统**
   - 用户关注/取消关注
   - 粉丝列表管理
   - 好友关系维护
   - 点赞功能

4. **互动系统**
   - 评论功能
   - 私信聊天
   - 消息推送

5. **推荐系统**
   - 基于用户行为的个性化推荐
   - 与 Gorse 推荐引擎集成

6. **辅助服务**
   - 消息消费者服务
   - 视频处理器服务
   - 事件处理服务

## 目录结构

```
src/
├── constant/          # 常量配置
├── extra/             # 扩展功能（tracing, profiling等）
├── idl/               # 接口定义文件(.proto)
├── models/            # 数据模型
├── services/          # 各个微服务实现
├── storage/           # 存储相关（数据库、缓存、文件等）
├── utils/             # 工具类
└── web/               # Web网关
```

## 核心特性

1. **高性能**: 采用多级缓存策略(Local Cache + Redis)，减少数据库访问压力
2. **可观测性**: 完整的链路追踪、指标监控和日志收集
3. **可扩展性**: 微服务架构便于水平扩展和独立部署
4. **异步处理**: 使用消息队列处理耗时任务如视频处理、消息同步等
5. **智能推荐**: 集成机器学习推荐引擎提供个性化内容推荐
6. **安全机制**: JWT Token 认证、布隆过滤器防缓存穿透等

## 快速开始

### 环境要求
- Go 1.19+
- Docker & Docker Compose
- Redis
- RabbitMQ
- Consul
- Gorse


## 性能优化

- 多级缓存机制
- 数据库索引优化
- 连接池复用
- 异步消息处理
- 布隆过滤器防止缓存穿透
- 请求限流保护

## 监控与追踪

- OpenTelemetry 实现全链路追踪
- Prometheus 收集服务指标
- Grafana 可视化监控面板
- 自定义中间件记录关键业务指标

